% !TEX TS-program = xelatex
% !TEX encoding = UTF-8 Unicode
\documentclass[gap.tex]{subfiles}
\begin{document}
\label{sec:real-leading}
Real leading points are a proposed change to leading points.

\subsection{Motivation}
Leading points should represent how long the pilots lead in front of other
pilots. Leading a group of pilots brings tactical risks and should be rewarded
appropriately.

\subsection{Criticism of Leading Points}
Leading points would be better described as progress points as they reward
pilots' relative progress along the course.

\subsection{The Proposal}
This proposal refines leading points to reward leading by;

\begin{enumerate}
    \item Renaming \textbf{leading} and \(LC\) to \textbf{progress} and \(PC\),
        keeping the rules around progress the same,
        see~\ref{sec:leading-points}.

    \item Adding \(LC\), a new coefficient representing a pilot's time spent
        leading.

    \item Awarding leading points as the fraction \(PC * LC\) of points
        available for leading.
\end{enumerate}

\subsection{The Model}
When a paragliding pilot flies in 3D space he has position and movement (speed)
vector. Imaginary spotlight cone with a tip at the pilot’s position and axis
– the movement vector can be used to determine if the pilot follows someone
else or leads. If there are other pilots in the volume of the pilot’s spotlight
cone – he is NOT leading, otherwise – he is leading.

The movement vector \(V\) should be integrated for 20 seconds to smooth the
fluctuations and to make the vector pointing upwards when the pilot is
thermaling. The spotlight cone has “black zone” and “grey zone”. Black zone is
smaller and if there other pilots inside it – the pilot won’t get leading
seconds at all. Grey zone is bigger and if there are other pilots inside it
– the pilot will get fractional leading seconds proportional to the distance to
the boundaries of the two zones. If there are more pilots inside the zones
– the pilot’s leading time will be accumulated with the minimum of all \(k\)
values.

\subsection{Calculation Steps}

\begin{enumerate}
    \item \textbf{Interpolate all positions and movement vectors for all
        pilots.}  For every second between the start of the speed section and
        the end of the speed section we must have the coordinates \((x, y, z)\)
        and the unit movement vector \((vx, vy, vz)\). This step must be done
        after the analysis of the flight (detection of start, SSS, ESS, goal or
        landing-out). The suggested interpolation logic is linear
        interpolation. Interpolation will be necessary only if the tracklog
        fixes are less than 1 per second or in case of tracklog gaps. The
        calculation may be made in two passes over the tracklog (first to
        interpolate all positions and second to calculate the average movement
        vectors) or in one pass. As a result of this step we should have for
        every second of the flight 6 numbers: 3 for the 3D position and 3 for
        the unit vector of the average movement. For 150 pilots and 5 - 6 hours
        task this data will consume no more than 100 MB of RAM. This step is
        suitable to be performed with multithreading.

    \item \textbf{Calculate the leading time ratio for every pilot.} Leading
        time ratio is how much of the pilot glide time is leading – it’s in \%.
        The “glide” and the “thermal” modes are detected by the angle between
        movement vector and vertical axis. If the angle is less than 60 degrees
        – the pilot is thermaling and the time accumulation is stopped. We need
        to calculate \(LT_i\) and \(GT_i\) for all pilots:

        In the above pseudo-code \(BZA\) is black zone angle, \(BZR\) is black
        zone radius, \(GZA\) is grey zone angle and \(GZR\) is grey zone
        radius. At the end of this step we must have minimum and maximum
        leading time ratio \(LTR_{min}\) and \(LTR_{max}\). This step is
        suitable to be performed with multithreading.

    \item \textbf{Calculate the progress coefficient \(PC_i\) for all pilots.}
        
        \begin{align*}
            PC_i &= ProgressPoints_i / ProgressPoints_{max}\footnotemark
        \end{align*}
        \footnotetext{Progress in this proposal is a renaming of leading so
        \(PC = LC\) as calculated currently.}

    \item \textbf{Calculate and minimum and maximum multiplication of the two
        coefficients \(M_{min}\) and \(M_{max}\)} In this step \(LC_{min}\)
        defines the minimum possible \(LC\). This means if \(LC_{min} = 0.2\)
        then the pilot with lowest leading time ratio will get only 20\% of the
        old leading points.
        
        \begin{align*}
            LE_i &= (LTR_i – LTR_{min}) / (LTR_{max} – LTR_{min}) \\
            LC_i &= LC_{min} + (2*LE_i – LE_i * LE_i) * (1 – LC_{min}) \\
            Mi &= PC_i * LC_i
        \end{align*}
            
    \item \textbf{Calculate the leading points for all pilots}
        
        \begin{align*}
            LP_i &= AvailableLeadingPoints * (M_i – M_{min}) / (M_{max} – M_{min} )
        \end{align*}
\end{enumerate}
\end{document}
